# ==============================================================================
# SuperCore v2.0 - Environment Configuration
# ==============================================================================
# Copy this file to .env and update values for your environment
#
# Usage:
#   cp .env.example .env
#   # Edit .env with your values
#   docker-compose up -d
# ==============================================================================

# ==============================================================================
# PostgreSQL Configuration
# ==============================================================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=supercore_dev
POSTGRES_USER=supercore
POSTGRES_PASSWORD=supercore_dev_password

# PostgreSQL Advanced Settings (optional)
# POSTGRES_INITDB_ARGS=--encoding=UTF8 --locale=en_US.UTF-8
# POSTGRES_SHARED_PRELOAD_LIBRARIES=pg_stat_statements

# ==============================================================================
# Redis Configuration
# ==============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
# REDIS_PASSWORD=your_redis_password_here  # Only if auth is enabled

# Redis Performance Tuning
REDIS_MAXMEMORY=512mb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# ==============================================================================
# Temporal Server Configuration
# ==============================================================================
TEMPORAL_HOST=localhost
TEMPORAL_PORT=7233

# Temporal Database
TEMPORAL_DB_HOST=temporal-postgres
TEMPORAL_DB_PORT=5432
TEMPORAL_DB_USER=temporal
TEMPORAL_DB_PASSWORD=temporal_password
TEMPORAL_DB_NAME=temporal

# Temporal Elasticsearch (for visibility)
TEMPORAL_ELASTICSEARCH_HOST=temporal-elasticsearch
TEMPORAL_ELASTICSEARCH_PORT=9200

# Temporal UI
TEMPORAL_UI_PORT=8088

# ==============================================================================
# NebulaGraph Configuration
# ==============================================================================
NEBULA_HOST=localhost
NEBULA_PORT=9669
NEBULA_USER=root
NEBULA_PASSWORD=nebula

# NebulaGraph Meta Service
NEBULA_META_PORT=9559

# NebulaGraph Storage Service
NEBULA_STORAGE_PORT=9779

# ==============================================================================
# Qdrant (Vector Database) Configuration
# ==============================================================================
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_GRPC_PORT=6334

# Collection settings
QDRANT_VECTOR_SIZE=1536  # For OpenAI embeddings
QDRANT_DISTANCE_METRIC=Cosine

# ==============================================================================
# MinIO (Object Storage) Configuration
# ==============================================================================
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minio_admin
MINIO_SECRET_KEY=minio_password_change_me
MINIO_BUCKET=supercore-documents

# MinIO Web Console
MINIO_CONSOLE_PORT=9001

# MinIO Performance
MINIO_REGION=us-east-1

# ==============================================================================
# Application Configuration
# ==============================================================================

# Server Port
SERVER_PORT=8080

# Logging
LOG_LEVEL=info
LOG_FORMAT=json  # json or text

# Request/Response
REQUEST_TIMEOUT=30s
SHUTDOWN_TIMEOUT=5s

# ==============================================================================
# Database Connection Pool
# ==============================================================================

# PostgreSQL
DB_POOL_MIN_SIZE=5
DB_POOL_MAX_SIZE=20
DB_POOL_IDLE_TIMEOUT=30m
DB_POOL_STATEMENT_CACHE_SIZE=128

# ==============================================================================
# Cache Configuration
# ==============================================================================

# Redis Cache TTLs
CACHE_TTL_SHORT=5m
CACHE_TTL_MEDIUM=1h
CACHE_TTL_LONG=24h

# Session Configuration
SESSION_TTL=24h
SESSION_REFRESH_TTL=7d

# ==============================================================================
# AI/LLM Configuration
# ==============================================================================

# OpenAI
OPENAI_API_KEY=sk-...
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.7

# Anthropic Claude
ANTHROPIC_API_KEY=sk-ant-...
ANTHROPIC_MODEL=claude-3-sonnet-20240229

# Ollama (Local LLM, if using)
# OLLAMA_BASE_URL=http://ollama:11434
# OLLAMA_MODEL=mistral

# ==============================================================================
# Embedding Configuration
# ==============================================================================

# Embedding Model
EMBEDDING_PROVIDER=openai  # openai, cohere, local
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSION=1536

# Cohere (alternative)
# COHERE_API_KEY=...
# COHERE_MODEL=embed-english-v3.0

# ==============================================================================
# RAG Configuration
# ==============================================================================

# Document Processing
MAX_DOCUMENT_SIZE=100MB
SUPPORTED_FORMATS=pdf,docx,txt,md,html,xlsx,pptx

# Chunking Strategy
CHUNK_SIZE=1024
CHUNK_OVERLAP=200
CHUNKING_STRATEGY=semantic  # semantic, fixed, recursive

# RAG Pipeline
RAG_RETRIEVAL_TOP_K=5
RAG_RERANK_TOP_K=3
RAG_SIMILARITY_THRESHOLD=0.7

# ==============================================================================
# Security Configuration
# ==============================================================================

# CORS
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# JWT Secrets
JWT_SECRET=change_me_in_production
JWT_EXPIRE=24h
JWT_REFRESH_SECRET=change_me_in_production
JWT_REFRESH_EXPIRE=7d

# API Keys
API_KEY_SECRET=change_me_in_production

# Rate Limiting
RATE_LIMIT_REQUESTS=1000
RATE_LIMIT_WINDOW=1m

# ==============================================================================
# Feature Flags
# ==============================================================================

# Enable/Disable Features
FEATURE_RAG_ENABLED=true
FEATURE_VECTOR_SEARCH_ENABLED=true
FEATURE_GRAPH_SEARCH_ENABLED=true
FEATURE_TEMPORAL_WORKFLOWS_ENABLED=true
FEATURE_MCP_ENABLED=true

# Debug Mode
DEBUG=false
VERBOSE_LOGGING=false

# ==============================================================================
# Monitoring and Observability
# ==============================================================================

# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# OpenTelemetry
OTEL_ENABLED=false
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4317

# Health Check
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_INTERVAL=30s

# ==============================================================================
# Database Backup Configuration
# ==============================================================================

# Backup Schedule (cron format)
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM UTC
BACKUP_RETENTION_DAYS=7
BACKUP_LOCATION=/backups

# ==============================================================================
# Environment-Specific Settings
# ==============================================================================

# Environment
ENVIRONMENT=development  # development, staging, production

# Node Environment (for Node.js services)
NODE_ENV=development

# ==============================================================================
# Optional: Third-Party Services
# ==============================================================================

# SendGrid (Email)
# SENDGRID_API_KEY=...

# Stripe (Payments)
# STRIPE_API_KEY=...

# AWS S3 (Alternative to MinIO)
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=...
# AWS_SECRET_ACCESS_KEY=...

# ==============================================================================
# Developer Configuration
# ==============================================================================

# Hot Reload
HOT_RELOAD_ENABLED=true

# API Documentation
SWAGGER_ENABLED=true
SWAGGER_UI_PATH=/api/docs

# GraphQL
GRAPHQL_ENABLED=false
GRAPHQL_PLAYGROUND_ENABLED=false

# ==============================================================================
# Notes
# ==============================================================================
# - Never commit actual .env file to version control
# - Keep passwords and secrets secure
# - Use different values for production
# - Update CHANGE_ME values before deploying
# - See README.md for detailed configuration guidance
